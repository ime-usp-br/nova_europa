# =============================================================================
# Nova Europa - Production Environment Configuration
# =============================================================================
# IMPORTANT: Copy this file to .env.production and configure with real values
# NEVER commit .env.production to version control
# =============================================================================

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
APP_NAME="Nova Europa"
APP_ENV=production
APP_KEY=
APP_DEBUG=false
APP_URL=https://europa.ime.usp.br

# Port configuration (for Docker)
APP_PORT=80
APP_SSL_PORT=443
WWWUSER=1000
WWWGROUP=1000

# Docker Network Configuration
# These settings configure the internal Docker network for container communication
# The subnet defines the IP range available for containers
# PHP-FPM will automatically be configured to accept connections from this subnet
# IMPORTANT: If you change these values, rebuild the Docker images for changes to take effect
DOCKER_NETWORK_SUBNET=172.27.0.0/16
DOCKER_NETWORK_GATEWAY=172.27.0.1

# Locale
APP_LOCALE=pt_BR
APP_FALLBACK_LOCALE=pt_BR
APP_FAKER_LOCALE=pt_BR

# Application versioning (for Docker images)
APP_VERSION=1.0.0

# Maintenance
APP_MAINTENANCE_DRIVER=file

# PHP Workers
PHP_CLI_SERVER_WORKERS=4

# Security
BCRYPT_ROUNDS=12

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_CHANNEL=stack
LOG_STACK=daily
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=warning

# -----------------------------------------------------------------------------
# Database (Local Application Database)
# -----------------------------------------------------------------------------
DB_CONNECTION=mysql
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=europa
DB_USERNAME=europa_user
DB_PASSWORD=CHANGE_THIS_PASSWORD_PRODUCTION
DB_ROOT_PASSWORD=CHANGE_THIS_ROOT_PASSWORD_PRODUCTION

# Forward port (only if exposing MySQL outside Docker network)
FORWARD_DB_PORT=3306

# -----------------------------------------------------------------------------
# Cache, Sessions, and Queue
# -----------------------------------------------------------------------------
CACHE_STORE=redis
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

QUEUE_CONNECTION=redis

# Redis Configuration
REDIS_CLIENT=phpredis
REDIS_HOST=redis
REDIS_PASSWORD=null
REDIS_PORT=6379

# Forward port (only if exposing Redis outside Docker network)
FORWARD_REDIS_PORT=6379

# -----------------------------------------------------------------------------
# Mail Configuration
# -----------------------------------------------------------------------------
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=sistemas@ime.usp.br
MAIL_PASSWORD=CHANGE_THIS_MAIL_PASSWORD
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=sistemas@ime.usp.br
MAIL_FROM_NAME="${APP_NAME}"

# -----------------------------------------------------------------------------
# USP Senha Ãšnica (OAuth)
# -----------------------------------------------------------------------------
SENHAUNICA_KEY=CHANGE_THIS_SENHAUNICA_KEY
SENHAUNICA_SECRET=CHANGE_THIS_SENHAUNICA_SECRET
SENHAUNICA_CALLBACK_ID=CHANGE_THIS_CALLBACK_ID

# -----------------------------------------------------------------------------
# USP Replicado Database (Read-Only Corporate Database)
# -----------------------------------------------------------------------------
# CRITICAL: These credentials access the USP corporate database
# Ensure firewall rules allow connection from production server

REPLICADO_HOST=replicado.usp.br
REPLICADO_PORT=1433
REPLICADO_DATABASE=replicado
REPLICADO_USERNAME=CHANGE_THIS_REPLICADO_USERNAME
REPLICADO_PASSWORD=CHANGE_THIS_REPLICADO_PASSWORD
REPLICADO_CODUNDCLG=45

# Replicado optional settings
REPLICADO_PATHLOG=/var/log/replicado.log
REPLICADO_SYBASE=true
REPLICADO_USAR_CACHE=false
REPLICADO_DEBUG=false
REPLICADO_DEBUG_LEVEL=0

# -----------------------------------------------------------------------------
# Browsershot/Puppeteer (PDF Generation)
# -----------------------------------------------------------------------------
PUPPETEER_CACHE_DIR=/var/www/.cache/puppeteer
PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=false
NODE_BINARY_PATH=/usr/bin/node
NPM_BINARY_PATH=/usr/bin/npm

# -----------------------------------------------------------------------------
# Broadcasting
# -----------------------------------------------------------------------------
BROADCAST_CONNECTION=log

# -----------------------------------------------------------------------------
# Filesystem
# -----------------------------------------------------------------------------
FILESYSTEM_DISK=local

# -----------------------------------------------------------------------------
# AWS (if using S3 for storage)
# -----------------------------------------------------------------------------
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# -----------------------------------------------------------------------------
# Vite
# -----------------------------------------------------------------------------
VITE_APP_NAME="${APP_NAME}"

# -----------------------------------------------------------------------------
# Deployment Configuration
# -----------------------------------------------------------------------------
# Run migrations on container startup
RUN_MIGRATIONS=true

# Warm cache on startup (optional, increases startup time)
WARM_CACHE=false

# Container role (for multi-container setups)
# Values: app, queue, scheduler
CONTAINER_ROLE=app

# -----------------------------------------------------------------------------
# Security Notes
# -----------------------------------------------------------------------------
# 1. Generate APP_KEY: php artisan key:generate
# 2. Use strong passwords (min 16 characters, mixed case, numbers, symbols)
# 3. Keep SENHAUNICA credentials confidential
# 4. REPLICADO credentials are extremely sensitive - production database access
# 5. Enable SSL/TLS in production (configure Nginx with certificates)
# 6. Use Docker secrets for sensitive values in production
# 7. Restrict database ports to Docker network only (remove FORWARD_* if possible)
# 8. Enable firewall rules to limit access to production server
# 9. Regular security audits and dependency updates
# 10. Monitor logs for suspicious activity

# -----------------------------------------------------------------------------
# Backup Configuration
# -----------------------------------------------------------------------------
# Backup schedule (cron format)
BACKUP_SCHEDULE="0 2 * * *"

# Backup retention (days)
BACKUP_RETENTION_DAYS=30

# Backup storage path
BACKUP_PATH=/backups
